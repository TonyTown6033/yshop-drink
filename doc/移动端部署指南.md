# ğŸ“± yshop-drink ç§»åŠ¨ç«¯éƒ¨ç½²æŒ‡å—

## é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®è·¯å¾„:** `/Users/town/code4/yshop-drink/yshop-drink-uniapp-vue3`
- **æŠ€æœ¯æ ˆ:** uniapp (Vue3)
- **æ”¯æŒå¹³å°:** å¾®ä¿¡å°ç¨‹åºã€H5ã€æ”¯ä»˜å®å°ç¨‹åºç­‰

## âœ… é…ç½®è¯´æ˜

### APIé…ç½®
æ–‡ä»¶: `config/index.js`
```javascript
export const VUE_APP_API_URL = 'http://localhost:48081/app-api'  // å·²é…ç½®æœ¬åœ°åç«¯
export const VUE_APP_UPLOAD_URL = VUE_APP_API_URL + '/infra/file/upload'
export const APP_ID = 'wxdbdbc123c8c30b45'  // å¾®ä¿¡å…¬ä¼—å·AppID
```

### å¾®ä¿¡å°ç¨‹åºé…ç½®
æ–‡ä»¶: `manifest.json` (ç¬¬404è¡Œ)
```json
"mp-weixin": {
  "appid": "wx001e2dc50bf532df",  // å½“å‰ä½¿ç”¨çš„æµ‹è¯•AppID
  "setting": {
    "urlCheck": false  // å·²å…³é—­åŸŸåæ ¡éªŒ,æ–¹ä¾¿æœ¬åœ°å¼€å‘
  }
}
```

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€: HBuilderX (æ¨è)

**æœ€é€‚åˆ:** å¾®ä¿¡å°ç¨‹åºå¼€å‘ã€å¤šç«¯è°ƒè¯•

#### 1. ä¸‹è½½å®‰è£… HBuilderX
```bash
# å®˜ç½‘ä¸‹è½½
https://www.dcloud.io/hbuilderx.html

# æ¨èä¸‹è½½æ­£å¼ç‰ˆ,åŒ…å«å†…ç½®çš„è¿è¡Œç¯å¢ƒ
```

#### 2. å¯¼å…¥é¡¹ç›®
1. æ‰“å¼€ HBuilderX
2. æ–‡ä»¶ â†’ å¯¼å…¥ â†’ ä»æœ¬åœ°ç›®å½•å¯¼å…¥
3. é€‰æ‹©ç›®å½•: `/Users/town/code4/yshop-drink/yshop-drink-uniapp-vue3`

#### 3. å®‰è£…ä¾èµ–
é¡¹ç›®ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å®‰è£…ä¾èµ–ã€‚å¦‚æœæ²¡æœ‰,åœ¨HBuilderXç»ˆç«¯æ‰§è¡Œ:
```bash
npm install
```

#### 4. è¿è¡ŒH5
- ç‚¹å‡»é¡¶éƒ¨å·¥å…·æ  "è¿è¡Œ" â†’ "è¿è¡Œåˆ°æµè§ˆå™¨" â†’ "Chrome"
- æˆ–è€…å¿«æ·é”®: `Ctrl/Cmd + R`
- é»˜è®¤åœ°å€: `http://localhost:8080/h5/`

#### 5. è¿è¡Œå¾®ä¿¡å°ç¨‹åº
**å‰ç½®è¦æ±‚:**
- å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

**è¿è¡Œæ­¥éª¤:**
1. é¦–æ¬¡è¿è¡Œéœ€é…ç½®å¾®ä¿¡å¼€å‘è€…å·¥å…·è·¯å¾„:
   - HBuilderX â†’ å·¥å…· â†’ è®¾ç½® â†’ è¿è¡Œé…ç½®
   - è®¾ç½®å¾®ä¿¡å¼€å‘è€…å·¥å…·è·¯å¾„

2. è¿è¡Œå°ç¨‹åº:
   - è¿è¡Œ â†’ è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ â†’ å¾®ä¿¡å¼€å‘è€…å·¥å…·
   - è‡ªåŠ¨æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·å¹¶åŠ è½½é¡¹ç›®

3. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­:
   - ä½¿ç”¨æµ‹è¯•AppID: `wx001e2dc50bf532df`
   - æˆ–è€…ç‚¹å‡» "æµ‹è¯•å·" ä½¿ç”¨æµ‹è¯•ç¯å¢ƒ

**å°ç¨‹åºé…ç½®ä¿®æ”¹:**
å¦‚éœ€ä½¿ç”¨è‡ªå·±çš„AppID:
1. åœ¨HBuilderXä¸­æ‰“å¼€ `manifest.json`
2. æ‰¾åˆ° "å¾®ä¿¡å°ç¨‹åºé…ç½®" é€‰é¡¹å¡
3. ä¿®æ”¹ AppID
4. é‡æ–°è¿è¡Œ

---

### æ–¹å¼äºŒ: Vue CLI è¿è¡ŒH5 (ç®€å•å¿«é€Ÿ)

**æœ€é€‚åˆ:** ä»…å¼€å‘H5ç‰ˆæœ¬,æ— éœ€å°ç¨‹åºåŠŸèƒ½

#### å®‰è£… @dcloudio/cli
```bash
cd /Users/town/code4/yshop-drink/yshop-drink-uniapp-vue3

# å…¨å±€å®‰è£… uni-cli
npm install -g @dcloudio/cli
```

#### è¿è¡ŒH5
```bash
# å¼€å‘æ¨¡å¼
npx cross-env NODE_ENV=development UNI_PLATFORM=h5 vue-cli-service serve

# æˆ–è€…æ·»åŠ åˆ° package.json scripts
npm run dev:h5  # å¦‚æœé…ç½®äº†è„šæœ¬
```

#### æ„å»ºH5ç”Ÿäº§ç‰ˆæœ¬
```bash
npx cross-env NODE_ENV=production UNI_PLATFORM=h5 vue-cli-service build

# æ„å»ºäº§ç‰©åœ¨ dist/build/h5/
```

---

### æ–¹å¼ä¸‰: Dockeréƒ¨ç½²H5é™æ€æ–‡ä»¶ (ç”Ÿäº§ç¯å¢ƒ)

#### 1. æ„å»ºH5ç”Ÿäº§ç‰ˆæœ¬
ä½¿ç”¨HBuilderXæˆ–CLIæ„å»º:
```bash
# å‘è¡Œ â†’ H5-æ‰‹æœºç‰ˆ
# æˆ–å‘½ä»¤è¡Œ
npx cross-env NODE_ENV=production UNI_PLATFORM=h5 vue-cli-service build
```

#### 2. åˆ›å»º Dockerfile
```dockerfile
FROM nginx:alpine

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY dist/build/h5/ /usr/share/nginx/html/

# Nginxé…ç½®
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

#### 3. Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name localhost;

    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # ä»£ç†åç«¯API
    location /app-api/ {
        proxy_pass http://host.docker.internal:48081/app-api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

#### 4. æ„å»ºå’Œè¿è¡Œ
```bash
docker build -t yshop-h5 .
docker run -d -p 8080:80 yshop-h5
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### 1. APIè¯·æ±‚è·¨åŸŸé—®é¢˜
**è§£å†³æ–¹æ¡ˆ:**
- å¼€å‘ç¯å¢ƒå·²é…ç½® `urlCheck: false`
- ç”Ÿäº§ç¯å¢ƒéœ€è¦åœ¨åç«¯é…ç½®CORSæˆ–ä½¿ç”¨Nginxä»£ç†

### 2. å¾®ä¿¡å°ç¨‹åºæ— æ³•åŠ è½½
**æ£€æŸ¥é¡¹:**
- ç¡®è®¤å·²å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·
- ç¡®è®¤AppIDé…ç½®æ­£ç¡®
- åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å…³é—­ "ä¸æ ¡éªŒåˆæ³•åŸŸå"

### 3. H5é¡µé¢ç©ºç™½
**æ£€æŸ¥é¡¹:**
- ç¡®è®¤åç«¯æœåŠ¡(48081ç«¯å£)æ­£å¸¸è¿è¡Œ
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- æ£€æŸ¥APIåœ°å€é…ç½®æ˜¯å¦æ­£ç¡®

### 4. å›¾ç‰‡èµ„æºåŠ è½½å¤±è´¥
**è§£å†³æ–¹æ¡ˆ:**
- æ£€æŸ¥ `VUE_APP_RESOURCES_URL` é…ç½®
- ç¡®è®¤å›¾ç‰‡ä¸Šä¼ è·¯å¾„æ­£ç¡®
- å¼€å‘ç¯å¢ƒå¯ä½¿ç”¨æœ¬åœ°è·¯å¾„

---

## ğŸ“Š å„å¹³å°è®¿é—®åœ°å€

### å¼€å‘ç¯å¢ƒ
- **H5:** http://localhost:8080/h5/ (HBuilderXé»˜è®¤)
- **åç«¯API:** http://localhost:48081/app-api
- **ç®¡ç†åå°:** http://localhost:80

### ç”Ÿäº§ç¯å¢ƒ(ç¤ºä¾‹)
- **H5:** https://h5.yourdomain.com
- **å°ç¨‹åº:** é€šè¿‡å¾®ä¿¡æ‰«ç è®¿é—®
- **åç«¯API:** https://api.yourdomain.com

---

## ğŸ” æµ‹è¯•è´¦å·

æ ¹æ®READMEæä¾›çš„ä¿¡æ¯:
- æ¼”ç¤ºåœ°å€å¯é€šè¿‡å…³æ³¨å…¬ä¼—å·ä½“éªŒ
- æµ‹è¯•éªŒè¯ç : `9999`

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æœ¬åœ°å¼€å‘:**
   - ç¡®ä¿åç«¯æœåŠ¡(48081)å·²å¯åŠ¨
   - ç¡®ä¿æ•°æ®åº“å’ŒRedisæ­£å¸¸è¿è¡Œ

2. **å°ç¨‹åºå‘å¸ƒ:**
   - éœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ç”³è¯·æ­£å¼AppID
   - é…ç½®æœåŠ¡å™¨åŸŸåç™½åå•
   - æäº¤å®¡æ ¸åå‘å¸ƒ

3. **H5å‘å¸ƒ:**
   - éœ€è¦éƒ¨ç½²åˆ°æœ‰åŸŸåçš„æœåŠ¡å™¨
   - é…ç½®HTTPSè¯ä¹¦(å¾®ä¿¡åˆ†äº«è¦æ±‚)
   - é…ç½®å¾®ä¿¡JS-SDKæƒé™

4. **APIé…ç½®:**
   - ç”Ÿäº§ç¯å¢ƒéœ€ä¿®æ”¹ `config/index.js` ä¸­çš„APIåœ°å€
   - æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹(æ¨èæµç¨‹)

```bash
# 1. ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œ
# åç«¯: http://localhost:48081 âœ…

# 2. ä½¿ç”¨HBuilderXå¯¼å…¥é¡¹ç›®
# è·¯å¾„: /Users/town/code4/yshop-drink/yshop-drink-uniapp-vue3

# 3. è¿è¡Œåˆ°æµè§ˆå™¨(H5)
# HBuilderX â†’ è¿è¡Œ â†’ è¿è¡Œåˆ°æµè§ˆå™¨ â†’ Chrome

# 4. æˆ–è¿è¡Œåˆ°å¾®ä¿¡å°ç¨‹åº
# HBuilderX â†’ è¿è¡Œ â†’ è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ â†’ å¾®ä¿¡å¼€å‘è€…å·¥å…·
```

---

## ğŸ“ ç›¸å…³é“¾æ¥

- **uniappå®˜æ–¹æ–‡æ¡£:** https://uniapp.dcloud.net.cn/
- **HBuilderXä¸‹è½½:** https://www.dcloud.io/hbuilderx.html
- **å¾®ä¿¡å¼€å‘è€…å·¥å…·:** https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- **é¡¹ç›®README:** /Users/town/code4/yshop-drink/README.md
